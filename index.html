<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="YouTuVJ2 - VJ Browser Application with YouTube videos">
  <title>YouTuVJ2 - VJ Browser App</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">

  <!-- Favicon (Optional) -->
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==">
</head>
<body>
  <!-- Main Application Container -->
  <div id="app">
    <!-- Control Panel -->
    <div id="control-panel"></div>

    <!-- Video Display Area -->
    <div id="video-container">
      <!-- Videos will be injected here by VideoManager -->
      <!-- Effect overlay will be added here by TransitionEngine -->
      <!-- Text overlays will be added here by TextOverlay -->
    </div>
  </div>

  <!-- Keyboard Help Overlay (will be created by KeyboardController) -->

  <!-- Main Application Script (ES6 Module) -->
  <script type="module" src="main.js"></script>

  <!-- Inline Script for Browser Compatibility Check -->
  <script>
    // Check for ES6 module support
    if (!('noModule' in HTMLScriptElement.prototype)) {
      console.error('This browser does not support ES6 modules.');
      document.body.innerHTML = `
        <div style="
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          background: #000;
          color: #fff;
          font-family: sans-serif;
          text-align: center;
          padding: 2rem;
        ">
          <div>
            <h1 style="color: #ff0066; margin-bottom: 1rem;">Browser Not Supported</h1>
            <p style="color: #aaa;">
              This application requires a modern browser with ES6 module support.<br>
              Please use Chrome 90+, Firefox 88+, Safari 14+, or Edge 90+.
            </p>
          </div>
        </div>
      `;
    }

    // Check for LocalStorage support
    try {
      localStorage.setItem('test', 'test');
      localStorage.removeItem('test');
    } catch (e) {
      console.warn('LocalStorage is not available. Settings will not be saved.');
    }

    // Service Worker registration (optional, for future PWA support)
    if ('serviceWorker' in navigator) {
      // Uncomment to enable service worker
      // navigator.serviceWorker.register('/sw.js').then(registration => {
      //   console.log('ServiceWorker registered:', registration);
      // }).catch(error => {
      //   console.log('ServiceWorker registration failed:', error);
      // });
    }

    // Prevent accidental page unload
    window.addEventListener('beforeunload', (e) => {
      // Check if there are unsaved changes (optional)
      const hasChanges = false; // Implement logic if needed

      if (hasChanges) {
        e.preventDefault();
        e.returnValue = '';
      }
    });

    // Log application info
    console.log('%c YouTuVJ2 ', 'background: #00ffff; color: #000; font-size: 20px; font-weight: bold; padding: 10px;');
    console.log('%c VJ Browser Application ', 'background: #ff00ff; color: #fff; font-size: 14px; padding: 5px;');
    console.log('Version: 2.0.0');
    console.log('Press H for keyboard shortcuts');
  </script>

  <!-- No JavaScript Fallback -->
  <noscript>
    <div style="
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: #000;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      padding: 2rem;
    ">
      <div>
        <h1 style="color: #ff0066; margin-bottom: 1rem;">JavaScript Required</h1>
        <p style="color: #aaa;">
          This application requires JavaScript to run.<br>
          Please enable JavaScript in your browser settings.
        </p>
      </div>
    </div>
  </noscript>
</body>
</html>
